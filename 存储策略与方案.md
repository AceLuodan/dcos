存储策略与方案

为了达到应用在DCOS上动态迁移和扩展的目的，DCOS上的应用在停止并重启后默认会失去状态数据而全新启动。但是，对于某些场景，如数据库，Kafka，Cassandra，Nginx缓存等有状态的应用，这些应用要求在重启时能够恢复原来的状态，此时就要考虑为这些应用提供持久化的存储策略和方案。

持久化卷（Persistent

Mesos提供了一种机制可以从磁盘资源创建一个持久化卷。因此，启动任务时，可以为这个任务创建一个位于任务容器之外的持久化卷，当任务失败或完成时，这个卷仍然存在。当任务退出时，这个任务占用的资源包括为之创建的持久化卷被归还给框架，因此，框架可以再次启动这个任务，或者基于这些资源启动一个恢复任务，甚至以之前任务的输出作为输入启动一个新的任务。持久化卷功能使得像HDFS、Cassandra等有状态服务可以将数据直接存储在由Mesos管理的存储方案中，而不必考虑额外的存储方案。

使用

持久化卷只能在预留资源上创建，预留资源既可以是静态预留也可以是动态预留的。一个在动态预留资源上创建的持久化卷，除非明确的销毁这个卷，否则将一直保留。这种处理方案可以降低偶发错误，比如，一个存在敏感数据的持久化卷如果被重新分配给另一个框架，就可能造成数据泄露。类似的，如果当前存在一个活跃的任务正在使用一个持久化卷，那么它是不能被销毁的。请参考“资源预留”章节查看Mesos中的资源预留机制。

通过预留多个[磁盘资源（multiple disk resources）](http://mesos.apache.org/documentation/latest/multiple-disk)，持久化卷也可以在隔离的和辅助的磁盘上创建。、、

持久化卷可以由操作员或授权的框架来创建。默认情况下，框架和操作员可以为任意绝角色创建持久化卷，也可以销毁任意持久化卷。Mesos授权服务可以



